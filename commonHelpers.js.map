{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/createMarkup.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n  #params = new URLSearchParams({\n    per_page: 12,\n    orientation: 'portrait',\n    client_id: this.#API_KEY\n  })\n\n  async getPopularPhotos(page) {\n    const url = `${\n      this.#BASE_URL\n    }?query=popular&page=${page}&${this.#params}`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      console.log('Something went wrong');\n    }\n  }\n\n  async getPhotosByQuery(page) {\n    const url = `${\n      this.#BASE_URL\n    }?query=${this.#query}&page=${page}&${this.#params}`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      console.log('Something went wrong');\n    }\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n}\n","export function createGalleryCard(images) {\n  return images\n    .map(\n      ({ urls, alt_description }) =>\n        `<li class='gallery__item'><img src='${urls.small}' alt='${alt_description}'></li>`\n    )\n    .join('');\n}\n","import { UnsplashAPI } from './UnsplashAPI';\nimport { createGalleryCard } from './createMarkup';\n\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst galleryContainer = document.querySelector('.js-gallery');\nconst paginationContainer = document.querySelector('#tui-pagination-container');\nconst form = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\n\nform.addEventListener(\"submit\", handleSubmit);\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n};\n\nconst api = new UnsplashAPI();\nconst pagination = new Pagination(paginationContainer, options);\nconst page = pagination.getCurrentPage();\npagination.on('afterMove', popular);\n\napi.getPopularPhotos(page).then(response => {\n  const markup = createGalleryCard(response.results);\n  galleryContainer.innerHTML = markup;\n  pagination.reset(response.total);\n});\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const query = event.target.elements.query.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      message: 'Whrite correct search!',\n      position: 'topRight'\n    })\n    return;\n  }\n  \n  api.query = query;\n  pagination.off('afterMove', popular);\n  pagination.off('afterMove', getByQuery);\n  loader.classList.remove('is-hiden');\n  api.getPhotosByQuery(page)\n    .then(({ results, total }) => {\n      if (!results.length) {\n        iziToast.error({\n          message: 'Error. Incorrect input!'\n        })\n        return;\n      }\n      if (total <= 12) {\n        paginationContainer.classList.add('is-hiden')\n      }\n      else {\n        paginationContainer.classList.remove('is-hiden')\n      }\n      const markup = createGalleryCard(results);\n      galleryContainer.innerHTML = markup;\n      pagination.reset(total);\n    })\n    .catch(err => iziToast.error({\n      message: 'Error. Something went wrong!'\n    }))\n    .finally(() => {\n      form.reset()\n      loader.classList.add('is-hiden');\n    })\n\n   pagination.on('afterMove', getByQuery);\n   \n }\n\nfunction popular(event) {\n  const currentPage = event.page;\n  api.getPopularPhotos(currentPage).then(({ results }) => {\n    const markup = createGalleryCard(results);\n    galleryContainer.innerHTML = markup;\n  });\n}\n\nfunction getByQuery(event) {\n  const currentPage = event.page;\n\n  api.getPhotosByQuery(currentPage).then(({ results }) => {\n    const markup = createGalleryCard(results);\n    galleryContainer.innerHTML = markup;\n  });\n}\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","_params","__privateGet","page","url","data","axios","newQuery","__privateSet","createGalleryCard","images","urls","alt_description","galleryContainer","paginationContainer","form","loader","handleSubmit","options","api","pagination","Pagination","popular","response","markup","event","query","iziToast","getByQuery","results","total","err","currentPage"],"mappings":"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"}