var P=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var n=(t,e,r)=>(P(t,e,"read from private field"),r?r.call(t):e.get(t)),s=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},d=(t,e,r,o)=>(P(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r);import"./assets/styles-ed77b92d.js";import{a as f,P as $,i as m}from"./assets/vendor-eeb85aad.js";var c,g,l,u;class _{constructor(){s(this,c,"https://api.unsplash.com/search/photos");s(this,g,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");s(this,l,"");s(this,u,new URLSearchParams({per_page:12,orientation:"portrait",client_id:n(this,g)}))}async getPopularPhotos(e){const r=`${n(this,c)}?query=popular&page=${e}&${n(this,u)}`;try{const{data:o}=await f(r);return o}catch{console.log("Something went wrong")}}async getPhotosByQuery(e){const r=`${n(this,c)}?query=${n(this,l)}&page=${e}&${n(this,u)}`;try{const{data:o}=await f(r);return o}catch{console.log("Something went wrong")}}set query(e){d(this,l,e)}}c=new WeakMap,g=new WeakMap,l=new WeakMap,u=new WeakMap;function h(t){return t.map(({urls:e,alt_description:r})=>`<li class='gallery__item'><img src='${e.small}' alt='${r}'></li>`).join("")}const p=document.querySelector(".js-gallery"),y=document.querySelector("#tui-pagination-container"),S=document.querySelector(".js-search-form"),w=document.querySelector(".loader");S.addEventListener("submit",E);const B={totalItems:0,itemsPerPage:12,visiblePages:5,page:1},i=new _,a=new $(y,B),q=a.getCurrentPage();a.on("afterMove",v);i.getPopularPhotos(q).then(t=>{const e=h(t.results);p.innerHTML=e,a.reset(t.total)});function E(t){t.preventDefault();const e=t.target.elements.query.value.trim();if(!e){m.warning({message:"Whrite correct search!",position:"topRight"});return}i.query=e,a.off("afterMove",v),a.off("afterMove",L),w.classList.remove("is-hiden"),i.getPhotosByQuery(q).then(({results:r,total:o})=>{if(!r.length){m.error({message:"Error. Incorrect input!"});return}o<=12?y.classList.add("is-hiden"):y.classList.remove("is-hiden");const M=h(r);p.innerHTML=M,a.reset(o)}).catch(r=>m.error({message:"Error. Something went wrong!"})).finally(()=>{S.reset(),w.classList.add("is-hiden")}),a.on("afterMove",L)}function v(t){const e=t.page;i.getPopularPhotos(e).then(({results:r})=>{const o=h(r);p.innerHTML=o})}function L(t){const e=t.page;i.getPhotosByQuery(e).then(({results:r})=>{const o=h(r);p.innerHTML=o})}
//# sourceMappingURL=commonHelpers.js.map
